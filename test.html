<head>
	<link href="index-main.css" rel="stylesheet" />
</head>
<body>
	<style>
		
	</style>
	<div id="main">
		<div>
			Filter based on location ?
			<button id="filter-start">Yes</button>
		</div>
		<p></p>
		<select multiple="multiple" style="display:none;">
			<optgroup label="Country">
				<option value="1-3">Location 1</option>
				<option value="1-4">Location 2</option>
				<option value="1-5">Location 3</option>
				<option value="1-6">Location 4</option>
			</optgroup>
			<optgroup label="Country 2" value="2">
				<option value="2-3">Location 1</option>
			</optgroup>
			<optgroup label="Country 3"value="3">
				<option value="3-1">Location 1</option>
				<option value="3-2">Location 2</option>
				<option value="3-3">Location 3</option>
			</optgroup>
			<optgroup label="Country 4" value="4">
				<option value="4-1">Location 1</option>
			</optgroup>
			<optgroup label="Country 5" value="5">
				<option value="5-1">Location 1</option>
			</optgroup>
		</select>
	</div>
    <script>
		function nit(data_link) {
			var loc_data;
			
			var r = new XMLHttpRequest();
			r.open("GET",data_link,true);
			r.responseType = "json";
			r.send();
			
			r.onreadystatechange = function(){
				if(r.readyState == 4){
					console.log(r);
					loc_data = r.response;
					console.log(loc_data);
				}
			}
		
			//RENDER FUNCTION(){}
		
			let filterBtn = document.getElementById("filter-start");
			filterBtn.addEventListener('click', function(){
				//
				let tag = document.createElement("script");
				tag.src = "jquery.js";
				document.body.appendChild(tag);
				
				let jqLoaded = false;
				let msLoaded = false;
				let mainLoaded = false;
				
				tag.onload = function(){
					jqLoaded = true;
					let tag2 = document.createElement("script");
					tag2.src = "multiple-select.js";
					document.body.appendChild(tag2);
					
					tag2.onload = function(){
						msLoaded = true;
						let tag3 = document.createElement("script");
						tag3.src = "index-main.js";
						document.body.appendChild(tag3);
						
						tag3.onload = function(){
							mainLoaded = true;
							customFilter.init(true, loc_data);
						}
					}
				}
				
				let msCss = document.createElement('link');
				msCss.href = "multiple-select.css";
				msCss.rel = "stylesheet";
				
				document.body.appendChild(msCss);
				
			});
		}
		window.addEventListener('load', nit("http://localhost:8080"));
		
    </script>
</body>